<Window x:Class="ShowKeys.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:showKeys="clr-namespace:ShowKeys"
        xmlns:history="clr-namespace:ShowKeys.History"
        mc:Ignorable="d"
        Title="ShowKeys" 
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        WindowStartupLocation="Manual">
    <Window.Resources>
        <!-- Default font size, will be overridden programmatically -->
        <system:Double x:Key="KeyTextFontSize" xmlns:system="clr-namespace:System;assembly=mscorlib">6</system:Double>
    </Window.Resources>
    <Border Background="#80000000" CornerRadius="5" Margin="5">
        <ItemsControl x:Name="KeyHistoryList" Margin="10,5">
            <ItemsControl.ItemTemplateSelector>
        <showKeys:KeyHistoryEntryTemplateSelector>
            <showKeys:KeyHistoryEntryTemplateSelector.KeyComboTemplate>
                <DataTemplate DataType="{x:Type history:KeyComboEntry}">
                    <Border Background="#AA663333" 
                            CornerRadius="3" 
                            Margin="2,0" 
                            Padding="5,2">
                       <TextBlock Text="{Binding KeyCombo}" 
                                   Foreground="White" 
                                   FontFamily="Consolas"
                                   FontSize="{DynamicResource KeyTextFontSize}"/>
                    </Border>
                </DataTemplate>
            </showKeys:KeyHistoryEntryTemplateSelector.KeyComboTemplate>
            <showKeys:KeyHistoryEntryTemplateSelector.TimePaddingTemplate>
                <DataTemplate DataType="{x:Type history:TimePaddingEntry}">
                    <Border Background="#00000000" 
                            CornerRadius="3" 
                            Margin="2,0" 
                            Padding="5,2">
                       <TextBlock Text="" 
                                   Foreground="Black" 
                                   FontFamily="Consolas" 
                                   FontWeight="Bold"
                                   FontSize="{DynamicResource KeyTextFontSize}"/>
                    </Border>
                </DataTemplate>
            </showKeys:KeyHistoryEntryTemplateSelector.TimePaddingTemplate>
        </showKeys:KeyHistoryEntryTemplateSelector>
            </ItemsControl.ItemTemplateSelector>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </Border>
</Window>
